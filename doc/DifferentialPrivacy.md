# 差分隐私

## 什么是差分隐私

### 引言

**差分隐私**顾名思义就是用来**防范差分攻击**的。

举个简单的例子，假设现在有一个婚恋数据库，2个单身8个已婚，只能查有多少人单身。刚开始的时候查询发现，2个人单身；现在张三跑去登记了自己婚姻状况，再一查，发现3个人单身。所以张三单身。

这里张三作为一个样本的的出现，使得攻击者获得了奇怪的知识。而差分隐私需要做到的就是使得攻击者的知识不会因为这些新样本的出现而发生变化。

那怎么做到呢？加入随机噪声。比如刚才的例子，本来两次查询结构是确定的2和3，现在加入随机噪声后，变成了两个随机变量，画出它们概率分布图。

现在，如果张三不在数据库的话，得到结果可能是2.5；张三在的话，得到的结果也可能是2.5；两个数据集查询得到某一个结果的概率很接近，以至于我们根本分不清这个结果来自于哪一个数据集，这样也就实现了攻击者的知识不会因为张三这个样本的出现与否而发生变化。

这些只是概念上的理解，总结一下就是对查询的结果加入噪声，使得攻击者无法辨别某一样本是否在数据集中。一个形象的说法就是，双兔傍地走安能辨我是雄雌。

### 定义

从数学上理解一下。上面的查询函数可以用  表示（这里暂时只考虑输出结果为1维的情况），随机噪声可以用  表示，最终得到的查询结果就是  。

对于两个汉明距离为1的数据集  ，对于任意的输出集合  ，应该有：

（差分隐私定义公式）

我们的目的是**使的这两个分布尽可能地接近**，那么衡量两个分布  的差异自然可以用到我们熟悉的KL-Divergence（相对熵，KL散度）

但是我们并不关心这两个分布的整体差异，我们只需要两个分布在差距最大的情况下能够被bound住，所以引入了MAX-Divergence，并且使得它小于  ：

（KL-Divergence 公式）

化简一下，利用  指数运算将  符号消去，然后将左边分母移到右边，就可以得到最开始的差分隐私定义图中定义的内容了。

  就被称为**隐私预算**。
  
  一般而言，  越小，隐私保护越好，但是加入的噪声就越大，数据可用性就下降了，数据相对于正确的中心值更加分散。
  
  对于应用差分隐私的算法，首先会设定整体的隐私预算，每访问一次数据，就会扣除一些预算，当预算用完，数据就无法再访问，
